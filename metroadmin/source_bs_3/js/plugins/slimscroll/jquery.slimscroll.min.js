(function(f){jQuery.fn.extend({slimScroll:function(m){var a=f.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:0.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200},m);this.each(function(){function s(d){if(p){d=d||window.event;var c=0;d.wheelDelta&&(c=-d.wheelDelta/
120);d.detail&&(c=d.detail/3);f(d.target||d.srcTarget).closest("."+a.wrapperClass).is(b.parent())&&g(c,!0);d.preventDefault&&!q&&d.preventDefault();q||(d.returnValue=!1)}}function g(d,f,h){var e=d,g=b.outerHeight()-c.outerHeight();f&&(e=parseInt(c.css("top"))+d*parseInt(a.wheelStep)/100*c.outerHeight(),e=Math.min(Math.max(e,0),g),e=0<d?Math.ceil(e):Math.floor(e),c.css({top:e+"px"}));k=parseInt(c.css("top"))/(b.outerHeight()-c.outerHeight());e=k*(b[0].scrollHeight-b.outerHeight());h&&(e=d,d=e/b[0].scrollHeight*
b.outerHeight(),d=Math.min(Math.max(d,0),g),c.css({top:d+"px"}));b.scrollTop(e);b.trigger("slimscrolling",~~e);t();n()}function B(){window.addEventListener?(this.addEventListener("DOMMouseScroll",s,!1),this.addEventListener("mousewheel",s,!1)):document.attachEvent("onmousewheel",s)}function u(){r=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),C);c.css({height:r+"px"});var a=r==b.outerHeight()?"none":"block";c.css({display:a})}function t(){u();clearTimeout(x);k==~~k&&(q=a.allowPageScroll,
y!=k&&b.trigger("slimscroll",0==~~k?"top":"bottom"));y=k;r>=b.outerHeight()?q=!0:(c.stop(!0,!0).fadeIn("fast"),a.railVisible&&h.stop(!0,!0).fadeIn("fast"))}function n(){a.alwaysVisible||(x=setTimeout(function(){a.disableFadeOut&&p||v||w||(c.fadeOut("slow"),h.fadeOut("slow"))},1E3))}var p,v,w,x,z,r,k,y,C=30,q=!1,b=f(this);if(b.parent().hasClass(a.wrapperClass)){var l=b.scrollTop(),c=b.parent().find("."+a.barClass),h=b.parent().find("."+a.railClass);u();if(f.isPlainObject(m)){if("scrollTo"in m)l=parseInt(a.scrollTo);
else if("scrollBy"in m)l+=parseInt(a.scrollBy);else if("destroy"in m){c.remove();h.remove();b.unwrap();return}g(l,!1,!0)}}else{a.height="auto"==a.height?b.parent().innerHeight():a.height;l=f("<div></div>").addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,height:a.height});b.css({overflow:"hidden",width:a.width,height:a.height});var h=f("<div></div>").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?
"block":"none","border-radius":a.size,background:a.railColor,opacity:a.railOpacity,zIndex:90}),c=f("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.size,BorderRadius:a.size,MozBorderRadius:a.size,WebkitBorderRadius:a.size,zIndex:99}),A="right"==a.position?{right:a.distance}:{left:a.distance};h.css(A);c.css(A);b.wrap(l);b.parent().append(c);b.parent().append(h);a.railDraggable&&
c.draggable({axis:"y",containment:"parent",start:function(){w=!0},stop:function(){w=!1;n()},drag:function(a){g(0,f(this).position().top,!1)}});h.hover(function(){t()},function(){n()});c.hover(function(){v=!0},function(){v=!1});b.hover(function(){p=!0;t();n()},function(){p=!1;n()});b.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(z=a.originalEvent.touches[0].pageY)});b.bind("touchmove",function(b){b.originalEvent.preventDefault();b.originalEvent.touches.length&&g((z-b.originalEvent.touches[0].pageY)/
a.touchScrollStep,!0)});"bottom"===a.start?(c.css({top:b.outerHeight()-c.outerHeight()}),g(0,!0)):"top"!==a.start&&(g(f(a.start).position().top,null,!0),a.alwaysVisible||c.hide());B();u()}});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);
